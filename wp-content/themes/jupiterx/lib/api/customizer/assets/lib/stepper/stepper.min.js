!function($,window,document,undefined){"use strict";var pluginName="stepper",defaults={selectorProgressBar:".stepper-progress",selectorInputNumber:".stepper-number",classNameChanging:"is-changing",value:"",decimals:0,min:0,max:100,step:1,unit:""};function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}$.extend(Plugin.prototype,{init:function(){this._curDown=!1,this._mouseDownX=0,this._mouseDownValue=0,this.$el=$(this.element),this.$input=this.$el,this.$progress=this.$el.find(this.settings.selectorProgressBar),this.decimals=this.$input.attr("decimals")||this.settings.decimals,this.min=this.$input.attr("min")||this.settings.min,this.max=this.$input.attr("max")||this.settings.max,this.step=this.$input.attr("step")||this.settings.step,this.unit=this.$input.attr("unit")||this.settings.unit,this.value=this.$input.val()||this.settings.value,this.setValue(this.value),this.$input.on("keydown",this.onKeyPress.bind(this)),this.$input.on("blur",this.onBlur.bind(this)),this.$input.on("paste input",this.onChange.bind(this)),this.$el.on("mousedown touchstart",this.onMouseDown.bind(this)),this.$el.on("wheel",this.onMouseWheel.bind(this)),this.$el.on("keydown",this.onKeydown.bind(this)),$(document).on("mouseup touchend",this.onMouseUp.bind(this))},onMouseDown:function(e){this._mouseDownX=e.clientX||e.originalEvent.touches[0].clientX,this._changeStart()},onMouseUp:function(e){if(!$.isNumeric(this.getValue()))return!1;this._changeEnd()},onMouseMove:function(e){if(!$.isNumeric(this.getValue()))return!1;if(!0===this._curDown){var t=(e.clientX||e.originalEvent.touches[0].clientX)-this._mouseDownX;this.setValue(this._mouseDownValue+t*this.step)}},onMouseWheel:function(e){var value=this.getValue();if(!$.isNumeric(value)&&value.length)return!1;if(this.$input.is(":focus")){e.preventDefault();var d=e.originalEvent.deltaY<0?1:-1;this.setValue(this.getValue()+d*this.step)}},onKeydown:function(e){if(38==e.which||40==e.which){var value=this.getValue();if(!$.isNumeric(value)&&value.length)return!1;if(!this.$input.is(":focus"))return!1;38==e.which&&this.setValue(this.getValue()+1*this.step),40==e.which&&this.setValue(this.getValue()-1*this.step)}},onChange:function(e){this._updateProgress(this.getValue())},onBlur:function(e){this._changeEnd(),this.setValue(this.getValue())},onKeyPress:function(e){13===e.keyCode&&this.$input.blur()},getValue:function(){var value=this.$input.val();return $.isNumeric(value)?parseFloat(value)||0:value},setValue:function(amount){var value;if($.isNumeric(amount)){value=Math.max(Math.min(amount,this.max),this.min);var n=value=this._roundValue(value);return n+=this.unit,this.$input.val(n),void this._updateProgress(value)}"auto"!=amount&&(amount=""),this.$input.val(amount),this._updateProgress(value)},_updateProgress:function(v){var r=this._valueToPercent(v)/100;this.$progress.css("transform","scaleX("+r+")"),this.$input.trigger("change")},_percentToValue:function(v){return this.min+v/100*(this.max-this.min)},_valueToPercent:function(v){var t=(v-this.min)/(this.max-this.min)*100;return Math.max(Math.min(t,100),0)},_roundValue:function(v){var maxDecimals=2,t=Math.pow(10,2);return Math.round(v*t)/t},_changeStart:function(){this._curDown=!0,this.$el.addClass(this.settings.classNameChanging)},_changeEnd:function(){this._curDown=!1,this.$el.removeClass(this.settings.classNameChanging)}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin-"+pluginName,new Plugin(this,options))})}}(jQuery,window,document);